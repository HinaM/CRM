<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>CRM測試</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/vuesax@3.12.2/dist/vuesax.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons/css/boxicons.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <link rel="stylesheet" href="./src/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons/css/boxicons.min.css">
  
</head>
<body>
  <div id="app">

    <vs-navbar v-model="activeItem" class="nabarx">
      <div slot="title">
        <vs-navbar-title>
          管理系統
        </vs-navbar-title>
      </div>

      <vs-navbar-item index="0">
        <a href="#">Home</a>
      </vs-navbar-item>
      <vs-navbar-item index="1">
        <a href="#">News</a>
      </vs-navbar-item>
      <vs-navbar-item index="2">
        <vs-button @click="active=!active" color="primary" type="filled">Open Sidebar</vs-button>
      </vs-navbar-item>
    </vs-navbar>

    <vs-sidebar parent="body" default-index="1"  color="primary" class="sidebarx" spacer v-model="active">

      <div class="header-sidebar" slot="header">
        <vs-avatar  size="70px" src="https://randomuser.me/api/portraits/men/85.jpg"/>

        <h4>
          My Name
          <vs-button color="primary" icon="more_horiz" type="flat"></vs-button>
        </h4>

      </div>

      <vs-sidebar-item index="1" icon="question_answer">
        Dashboard
      </vs-sidebar-item>

      <vs-sidebar-item index="2" icon="gavel">
        History
      </vs-sidebar-item>

      <vs-divider icon="person" position="left">
        User
      </vs-divider>

      <vs-sidebar-item index="3" icon="verified_user">
        Configurations
      </vs-sidebar-item>
      <vs-sidebar-item index="4" icon="account_box">
        Profile
      </vs-sidebar-item>
      <vs-sidebar-item index="5" >
        Card
      </vs-sidebar-item>

      <div class="footer-sidebar" slot="footer">
        <vs-button icon="reply" color="danger" type="flat">log out</vs-button>
        <vs-button icon="settings" color="primary" type="border"></vs-button>
      </div>

    </vs-sidebar>
    
    <div>

      
      <vs-tabs>
        <vs-tab label="庫存紀錄表">

          <div class="fit-box" style="margin-top: 30px;">
            <div class="py-2 px-2 fit-ti">
              <h3>篩選</h3>
            </div>
            <vs-row class="filter-row" vs-type="flex">
              <vs-col class="filter-col">
                <vs-input class="filter-input" label="商品編號" v-model="searchId" color="#5b67a2" />
              </vs-col>
            
              <vs-col class="filter-col">
                <vs-input class="filter-input" label="商品名稱" v-model="searchTitle" color="#5b67a2"/>
              </vs-col>



              
              <vs-col class="filter-col">
                <vs-select
                  autocomplete
                  class="selectExample"
                  label="商品類別"
                  v-model="searchCata"
                  style="width: 100%;"
                  color="#5b67a2"
                >
                  <vs-select-item></vs-select-item>
                  <vs-select-item
                    v-for="(item, index) in catalog"
                    :key="item"
                    :value="item"
                    :text="item"
                  ></vs-select-item>
                </vs-select>

               

              </vs-col>
              
             
            </vs-row>


            <div style="width: 100%;display: flex;align-items: center;justify-content:end;">
              <vs-button class="btn-pri" @click.native="searchTickets()" style="margin-right: 0.5rem;margin-top: 0.5rem;">搜尋商品</vs-button>
              <vs-button color="dark" type="filled" style="margin-right: 0.5rem;margin-top: 0.5rem;" @click="clearAll">重新篩選</vs-button>
            </div>

            
             
          </div>

         

          



          <div class="con-tab-ejemplo" style="margin-top: 30px;">
            <div class="table-scroll">

              <vs-table max-items="10" pagination  :data="tickets">
                <template slot="header">
                 
                  <div class="py-2 px-2 fit-ti" style="width: 100%;">
                    <h3>庫存紀錄表</h3>
                  </div>
                
                </template>
                <template slot="thead" class="thead">
                  <vs-th sort-key="product_id" class="py-2">
                    商品編號
                  </vs-th>
                  <vs-th sort-key="title">
                    商品名稱
                  </vs-th>
                  <vs-th sort-key="category">
                    商品類別
                  </vs-th>
                  <vs-th sort-key="price">
                    商品價格
                  </vs-th>
                  <vs-th sort-key="inventory">
                    在庫數量
                  </vs-th>
                  <vs-th sort-key="launch">
                    上架狀態
                  </vs-th>
                  <vs-th sort-key="status">
                    商品狀態
                  </vs-th>
                  <vs-th sort-key="latest_time">
                    最後修改時間
                  </vs-th>
                  <vs-th>
                    操作
                  </vs-th>
                </template>
          
                <template slot-scope="{data}">
                  <vs-tr :key="tr.id" v-for="tr in data" >
                    <vs-td :data="tr.product_id">
                      {{tr.product_id}}
                    </vs-td>
                    <vs-td class="text-limit-10" :data="tr.title">
                      {{tr.title}}
                    </vs-td>

                    <vs-td :data="tr.category">
                      {{tr.category}}
                    </vs-td>
          
                    <vs-td :data="tr.price">
                      {{tr.price}}
                    </vs-td>
          
                    <vs-td :data="tr.inventory">
                      {{tr.inventory}}
                    </vs-td>

                    <vs-td :data="tr.launch">
                      <vs-td v-if="tr.launch">
                        <vs-chip transparent color="#24c1a0">
                          上架中
                        </vs-chip>
                      </vs-td>
                      <vs-td v-else>
                        <vs-chip transparent color="#a1202b">
                          未上架
                        </vs-chip>
                      </vs-td>
                      
                    </vs-td>
          
                    <vs-td :data="tr.status">
                      <vs-chip
                        v-if="tr.status == '可供銷售'"
                        transparent
                        color="#24c1a0"
                      >
                        可供銷售
                      </vs-chip>
                  
                      <vs-chip
                        v-else-if="tr.status == '需補貨'"
                        transparent
                        color="warning"
                      >
                        需補貨
                      </vs-chip>
                  
                      <vs-chip
                        v-else
                        transparent
                        color="#a1202b"
                      >
                        缺貨中
                      </vs-chip>
                    </vs-td>

                    <vs-td :data="tr.latest_time">
                      {{toTwTime(tr.latest_time)}} 
                    </vs-td>


                    <vs-td>
                      <vs-button @click="popupActivo=true; edit(tr.id)" >編輯商品</vs-button>
                      <vs-button>調整庫存</vs-button>
                    </vs-td>
        
                  </vs-tr>
                </template>
          
          
              </vs-table>

            
              <vs-popup class="holamundo"  title="編輯商品" :active.sync="popupActivo">
                
                
                <vs-row>

                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-input class="filter-input py-1" label-placeholder="商品編號" v-model="valuePId" color="#5b67a2"/>
                  </vs-col>

                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-input class="filter-input py-1" label-placeholder="商品名稱" v-model="valueTitle" color="#5b67a2"/>
                  </vs-col>

                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-input class="filter-input py-1" label-placeholder="商品描述" v-model="valueDescription" color="#5b67a2"/>
                  </vs-col>
                
                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-input type="number" class="filter-input py-1" label-placeholder="商品價格" v-model.number="valuePrice" color="#5b67a2"/>
                  </vs-col>

                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-input type="number" class="filter-input py-1" label-placeholder="安全庫存量" v-model.number="valueSafetyStock" color="#5b67a2"/>
                  </vs-col>


                  <!--
                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-tooltip style="width: 100%;" text="Tooltip delay 0.5s">
                      <vs-input class="filter-input py-1" label-placeholder="安全庫存量" v-model="valueSafetyStock"/>
                    
                    </vs-tooltip>
                  </vs-col>

                  -->

                  

                  <vs-col vs-type="flex" vs-justify="center" vs-align="center" vs-w="12">
                    <vs-input class="filter-input py-1" label-placeholder="商品分類" v-model="valueCata"/>
                  </vs-col>

                    <vs-col vs-type="flex"  vs-align="center" vs-w="12" class="py-1">
                      <label for="" class="pe-2 py-1">商品上架</label>
                      <vs-switch v-model="valueLaunch">
                        <span slot="on">On</span>
                        <span slot="off">Off</span>
                      </vs-switch>
                    </vs-col>


                  <vs-row class="py-1" style="width: 100%; display: flex;justify-content: end;">
                    <div>
                      <vs-button color="primary" type="filled" @click="updatetickets(valueId)">確定修改</vs-button>
                      <vs-button color="danger" type="filled" @click="popupActivo = false">取消</vs-button>
                    </div>
                  </vs-row>

                  
                  
                  
                  
                </vs-row>
                
              </vs-popup>
              
        
            </div>
          </div>
        </vs-tab>



        <vs-tab label="Service">
          <div class="con-tab-ejemplo">
            

            <div>
            

              <vs-row>
  
                <vs-col v-tooltip="'col - 4'" vs-type="flex" vs-justify="center" vs-align="center" vs-w="4" >
                  <div class="py-1" style="width: 80%; display: flex; align-items: center; justify-content: center;flex-direction: column;">
                    <h4 class="text-success">可供銷售</h4>
                    {{inventory_count[0].count}}
                  </div>
                </vs-col>
  
                <vs-col v-tooltip="'col - 4'" vs-type="flex" vs-justify="center" vs-align="center" vs-w="4">
                  <div class="py-1" style="width: 80%; display: flex; align-items: center; justify-content: center;flex-direction: column;">
                    <h4 class="text-warning">需補貨</h4>
                    {{inventory_count[1].count}}
                  </div>
                </vs-col>
  
                <vs-col v-tooltip="'col - 4'" vs-type="flex" vs-justify="center" vs-align="center" vs-w="4">
                  <div class="py-1" style="width: 80%; display: flex; align-items: center; justify-content: center;flex-direction: column;">
                    <h4 class="text-danger">缺貨中</h4>
                    {{inventory_count[2].count}}
                  </div>
                </vs-col>
  
              </vs-row>
  
  
              
              
            </div>

          </div>
        </vs-tab>

        

        <vs-tab disabled label="Disabled">
          <div class="con-tab-ejemplo">
            Disabled
          </div>
        </vs-tab>

        <vs-tab label="L amet">
          <div class="con-tab-ejemplo">
            Lt
          </div>
        </vs-tab>
      </vs-tabs>
    </div>
    

    
    
    
      
    

    
  </div>
  
</body>
<script src="https://unpkg.com/vue@2/dist/vue.js"></script>
<script src="https://unpkg.com/vuesax@3.12.2/dist/vuesax.umd.js"></script>
<script src="./src/app.js"></script>
</html>
